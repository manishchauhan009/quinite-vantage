{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RealEstateProperty",
  "type": "object",
  "required": ["transaction", "property", "location", "pricing", "media", "description"],
  "properties": {
    "transaction": {
      "type": "string",
      "enum": ["sell", "rent", "lease", "pg"]
    },
    "property": {
      "type": "object",
      "required": ["category", "use_case"],
      "properties": {
        "category": { "type": "string", "enum": ["residential", "commercial", "land"] },
        "use_case": { "type": "string" }
      }
    },
    "location": {
      "type": "object",
      "required": ["city", "locality"],
      "properties": {
        "city": { "type": "string" },
        "locality": { "type": "string" },
        "landmark": { "type": "string" }
      }
    },
    "pricing": {
      "type": "object",
      "required": ["min", "max"],
      "properties": {
        "min": { "type": "number" },
        "max": { "type": "number" }
      }
    },
    "media": {
      "type": "object",
      "required": ["thumbnail"],
      "properties": {
        "thumbnail": { "type": "string", "description": "Primary mandatory image" }
      }
    },
    "description": {
      "type": "string",
      "minLength": 50,
      "description": "Primary knowledge base for AI"
    }
  },
  "allOf": [
    {
      "if": {
        "properties": { "property": { "properties": { "category": { "const": "residential" } } } }
      ,
      "then": {
        "properties": {
          "property": {
            "properties": {
              "use_case": {
                "enum": [
                  "apartment","builder_floor","independent_house","villa_bungalow","row_house","studio","penthouse","farm_house","service_apartment"
                ]
              },
              "residential": {
                "type": "object",
                "required": ["bhk", "carpet_area"],
                "properties": {
                  "bhk": { "type": "string", "enum": ["1rk","1bhk","2bhk","3bhk","4bhk","5plus"] },
                  "carpet_area": { "type": "number" },
                  "built_up_area": { "type": "number" },
                  "super_built_up_area": { "type": "number" }
                }
              }
            },
            "required": ["residential"]
          }
        }
      }
    },
    {
      "if": {
        "properties": { "property": { "properties": { "category": { "const": "commercial" } } } }
      ,
      "then": {
        "properties": {
          "property": {
            "properties": {
              "use_case": {
                "enum": ["office","coworking","retail","industrial","hospitality","institutional"]
              },
              "commercial": {
                "type": "object",
                "oneOf": [
                  { "title": "Office / Coworking", "required": ["area"], "properties": { "area": { "type": "number" } } },
                  { "title": "Retail", "required": ["area","ground_floor"], "properties": { "area": { "type": "number" }, "ground_floor": { "type": "boolean" } } },
                  { "title": "Industrial / Storage", "required": ["built_up_area"], "properties": { "built_up_area": { "type": "number" } } }
                ]
              }
            },
            "required": ["commercial"]
          }
        }
      }
    },
    {
      "if": {
        "properties": { "property": { "properties": { "category": { "const": "land" } } } }
      ,
      "then": {
        "properties": {
          "property": {
            "properties": {
              "use_case": { "enum": ["residential_plot","commercial_plot","industrial_plot","agricultural_land","na_plot"] },
              "land": { "type": "object", "required": ["plot_area"], "properties": { "plot_area": { "type": "number" } } }
            },
            "required": ["land"]
          }
        }
      }
    }
    
  ]
}
